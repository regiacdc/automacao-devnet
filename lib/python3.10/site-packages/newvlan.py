from netmiko import ConnectHandler
import paramiko
import time

# Defina uma lista de endereços IP dos switches Cisco
switches = [
    '192.168.1.154',
    '192.168.1.155',
    '192.168.1.156',
    '192.168.1.157',
    # Adicione mais endereços IP conforme necessário
]

# Defina as informações de autenticação SSH
username = 'cisco'
password = 'cisco'

# Lista de informações de conexão para os dispositivos
devices = [
    {
    'device_type': 'cisco_ios',
    'ip': '192.168.1.155',
    'port': '22',
    'username': 'cisco',
    'password': 'cisco',
},
    {
    'device_type': 'cisco_ios',
    'ip': '192.168.1.156',
    'port': '22',
    'username': 'cisco',
    'password': 'cisco',

},
    
]

# Comandos de configuração da interface loopback
interface_commands = [
    'enable',
    'cisco',
    'configure terminal',
    'interface Loopback0',
    'description Minha Loopback',
    'ip address 10.10.10.10 255.255.255.255',  # Substitua pelo endereço IP desejado
    'no shutdown',
]

# Loop através da lista de dispositivos e aplique as configurações
for device in devices:
    try:
        # Conectar ao dispositivo
        net_connect = ConnectHandler(**device)

        # Executar comandos para configurar a interface Loopback
        output = net_connect.send_config_set(interface_commands)
        print(f"Configurações aplicadas em {device['ip']}:\n{output}")

        # Fechar a conexão
        net_connect.disconnect()
    except Exception as e:
        print(f"Erro na conexão com {device['ip']}: {str(e)}")

print("Concluído.")
