from flask import Flask, render_template, request
from netmiko import ConnectHandler
app = Flask(__name__)

# Rota principal
@app.route('/', methods=['GET', 'POST'])
def index():
    if request.method == 'POST':
        interface = request.form['interface']
        vlan = request.form['vlan']
        configure_vlan(interface, vlan)
        return "VLAN configurada com sucesso!"
    return render_template('index.html')

# Função para configurar a VLAN usando Netmiko
def configure_vlan(interface, vlan):
    # Defina as informações de autenticação SSH
    username = 'cisco'
    password = 'cisco'

    # Defina os detalhes do dispositivo
    device = {
        'device_type': 'cisco_ios',
        'ip': '192.168.1.157',
        'username': username,
        'password': password,
    }

    # Comandos de configuração da VLAN
    vlan_commands = [
        'enable',
        'configure terminal',
        f'interface {interface}',
        f'switchport access vlan {vlan}',
        'end',
    ]

    # Conecte-se ao dispositivo e execute os comandos de configuração
    with ConnectHandler(**device) as net_connect:
        output = net_connect.send_config_set(vlan_commands)
        print(output)

if __name__ == '__main__':
    app.run()
































































